---
title: Python基础知识笔记
author: AshGrey
date: 2024-07-12 00:00:00 +0800
categories: [Coumputer Science, Language]
tags: [Computer Science, Python]
math: true
---

> 本文章所属领域：
>
> [实践产业知识 - 工业产业 - 计算机科学 - 编程语言 - Python]({% post_url /Computer Science/2024-02-08-计算机科学：索引笔记 %})
{: .prompt-info}

<br>

## 1 Python 基础语法

<br>

### 1.1 变量与简单数据类型

<br>

- Python 的变量名只能包含字母、数字和下划线，变量不能以数字开头；
- Python 使用`#`表示注释；
- Python 的变量不需要声明，不需要声明符，每个变量在使用前都必须赋值；
- Python 支持在一行内对多个变量进行赋值，位置相对；
- Python 是动态语言，同一个变量可以多次赋值，且可以赋值不同的类型；
- Python 使用四个空格或者制表符进行缩进。

<br>

#### 1.1.1 字符串

<br>

在 Python 中，用引号括起的就是字符串，可以是单引号也可以是双引号。Python 中有很多针对字符串的内建方法：

<br>

``` python
message = "I love Huaier"
print(f"{message.title()}\n{message.upper()}\n{message.lower()}")
```

<br>

在这里`f`表示这是一个在字符串中插入变量的方法，这和 JavaScript 中反引号中的`${}`是一样的。我们在下面给出一些字符串的常用方法：

<br>

|方法|说明|
|:---:|:---:|
|`title()`|对句子中每个单词的首字母大写|
|`upper()`|对字符串中的每个英文字母大写|
|`lower()`|对字符串中的每个英文字母小写|
|`rstrip()`|删除字符串末尾的空格|
|`lstrip()`|删除字符串开头的空格|
|`strip()`|删除字符串两端的空格|

<br>

在字符串中，有一些字符不能直接在字符串中输入，否则会出现语法错误，这些字符必须通过转义来表示，例如`\\`表示反斜杠`\`，`\"`表示双引号`"`，`\'`表示单引号。如果一个字符串中转义的字符太多，也可以在字符串前加上`r`表示默认不转义：

<br>

``` python
message_1 = "\\\'\n\\\""
message_2 = r"\\\'\n\\\""
print(message_1)
print(message_2)
# >>> \'
# ... \"
# ... \\\'\n\\\"
```

<br>

Python 还支持多行字符串，使用三个单引号`'''`包裹多行字符串，多行字符串默认换行，且多行字符串也可以使用`f`内嵌变量，使用`r`表示默认不转义。

<br>

``` python
message_1 = '''Python\n
JavaScript'''

message_2 = r'''Python\n
JavaScript'''

print(message_1)
print(message_2)
# >>> Python
# ... 
# ... JavaScript
# ... Python\n
# ... JavaScript
```

<br>

#### 1.1.2 数

<br>

Python 内置的运算符如下：`+`、`-`、`*`、`/`、`//`（整除）、`**`（乘方）、`%`（取模），每个运算符都有对应的赋值运算符：`+=`、`-=`等，这与 C++ 中的含义是相同的。

<br>

Python 可以处理任意大小的整数，对于多位的整数，Python 支持数字中间使用`_`进行分隔，也支持 16 进制数，只要在开头使用`0x`表示即可。

<br>

Python 也支持浮点数，较大或者较小的浮点数可以用科学计数法表示，如`1.2e8`和`1.3e-9`等。但是要注意结果包含的小数位数可能是不确定的，一个很著名的例子如下：

<br>

``` python
print(0.1 + 0.2)
# >>> 0.30000000000000004
```

<br>

将任意两个数相除时，结果总是浮点数，即便这两个数都是整数且可以整除。在其他任何运算中，如果一个操作数是整数，另一个操作数是浮点数时，结果也总是浮点数：

<br>

``` python
print(4 / 2)    # 2.0
print(4 + 1.0)  # 5.0
print(2 * 3.0)  # 6.0
print(3.0 ** 2) # 9.0
```

<br>

Python 内置了复数以及相关的运算，其中`j`表示虚数单位，$j^2=-1$，注意`1+j`不是合法的复数，必须表示成`1+1j`，复数间没有`//`运算：

<br>

``` python
print((1 + 1j) / (2 + 1j)) # (0.6+0.2j)
print((1 + 1j) * (2 + 1j)) # (1+3j)
```

<br>

#### 1.1.3 布尔值

<br>

Python 内置的布尔值字面量是`True`和`False`，布尔值可以用运算关键字`and`、`or`与`not`进行运算，这在流控制语句中经常使用。

<br>

布尔值实际是整数类型，`True`等价于`1`，`False`等价于`0`，之所以不说这是因为布尔值可以转换为整数，是因为使用`isinstance`可以看出`bool`类型是`int`类型的子类（Python 内置`type`函数用于查看类型，内置`isinstance`函数用来检查一个字面值或者变量是否是某种类型）：

<br>

``` python
print(type("I love Huaier!"),   # <class 'str'>
      type(1),                  # <class 'int'>
      type(2.0),                # <class 'float'>
      type(1 + 2j),             # <class 'complex'>
      type(True),               # <class 'bool'>
      isinstance(True, bool),   # True
      isinstance(True, int))    # True
```

<br>

### 1.2 复合数据类型

<br>

#### 1.2.1 list

<br>

Python 中用`[]`表示 list（列表），用逗号分隔其中的元素。像数组一样，可以使用索引访问 list 中的元素，注意 Python 提供了一种特殊的索引方式：可以使用`-1`索引访问 list 最后一个元素，`-2`访问倒数第二个元素，以此类推，这在不知道 list 长度时非常有用。

<br>

``` python
languages = ['Python', 'Haskell', 'F#', 'Lisp']
print(languages[-1])    # Lisp
print(languages[-2])    # F#
```

<br>

list 的内建方法如下：

<br>

|方法|说明|
|:---:|:---:|
|`append(x)`|在 list 末尾添加元素|
|`insert(pos, x)`|在 list 的任何位置添加元素，需要指定新元素的索引和值|
|`pop()`|栈的弹出方法，从 list 的末尾弹出元素|
|`pop(pos)`|与栈的弹出方法不同，指定参数后`pop`方法可以弹出任意位置的元素|
|`remove(x)`|根据指定的内容`x`删除 list 中第一个值为`x`的元素|
|`sort()`|永久性地对 list 排序，无参数时默认升序排序，向内建方法<br>`sort`传递`reverse=True`参数可以降序排序|
|`reverse()`|反转 list|
|`clear()`|清除 list 中的内容|
|`copy()`|返回一个一样的 list，常用于复制给另一个 list|
|`count(x)`|统计元素`x`在 list 中出现的次数|
|`index(x, start, stop)`|在区间 $\left[\text{start}..\text{stop}-1\right]$ 间搜索元素`x`，并返回找到的第一个索引|

<br>

对列表临时排序可以使用函数`sorted()`（注意不是 list 的内建方法），`sorted()`函数返回一个临时排序的 list，该函数也可以指定参数`reverse=True`（注意，不管是内建方法`sort()`还是函数`sorted()`，对于字符串都是按照字典序排序，对于数字都是按照实际大小排序，且当列表中有不同类型的元素时无法进行排序，除非重载了运算符）。

<br>

``` python
languages = ['Python', 'C++', 'Java', 'TypeScript']
print(sorted(languages))
# ['C++', 'Java', 'Python', 'TypeScript']
print(sorted(languages, reverse=True))
# ['TypeScript', 'Python', 'Java', 'C++']
print(languages)
# ['Python', 'C++', 'Java', 'TypeScript']
languages.sort()
print(languages)
# ['C++', 'Java', 'Python', 'TypeScript']
languages.sort(reverse=True)
print(languages)
# ['TypeScript', 'Python', 'Java', 'C++']
```

<br>

#### 1.2.2 tuple

<br>

Python 中用`()`表示 tuple （元组），tuple 是不可变的 list，用逗号分隔其元素，创建只有一个元素的 tuple 需要在唯一的元素后加上`,`：`my_tuple=(3,)`。虽然 tuple 不可修改，但是可以给指向 tuple 的变量重新赋值。tuple 也具有 1.3.1 节中讲述的`for in :`循环。

<br>

``` python
languages = ('Vue', 'React', 'Flutter', 'Next', 'Vue')
for lang in languages :
    print(lang)
languages = ('Haskell', 'Lisp', 'F#')
for lang in languages :
    print(lang)
```

<br>

tuple 的内建方法只有这两个：

<br>

|方法|说明|
|:---:|:---:|
|`count(x)`|统计元素`x`在 tuple 中出现的次数|
|`index(x, start, stop)`|在区间 $\left[\text{start}..\text{stop}-1\right]$ 间搜索元素`x`，并返回找到的第一个索引|

<br>

#### 1.2.3 dict

<br>

Python 中的 dict（字典）是一系列键值对（key-value），每个键（key）都与一个值（value）相关联，可以使用键来访问相关联的值，可以将任何 Python 对象作为值。Python 用`{}`以及其中的一系列键值对表示 dict，键值对用冒号`:`关联，键值对之间用逗号隔开。

<br>

``` python
id_card = {'id' : 2022012050, 'name' : 'AshGrey'}
print(id_card['id'])    # 2022012050
print(id_card['name'])  # AshGrey
```

<br>

当然我们也可以先创建一个空的 dict，然后再用这种对值的访问方式创建 dict：

<br>

``` python
id_card = {}
id_card['id'] = 2022012050
id_card['name'] = 'AshGrey'
```

<br>

dict 的内置方法如下：

<br>

|方法|说明|
|:---:|:---:|
|`items()`|返回一个以`(key,value)`的 tuple 为元素构成的 list，用于遍历 dict|
|`keys()`|返回一个以`key`为元素构成的 list，用于遍历 dict 的键|
|`values()`|返回一个以`value`为元素构成的 list，用于遍历 dict 的值|
|`clear()`|删除 dict 中的所有元素|
|`get(key,defalut=None)`|返回指定键的值，如果键不在 dict 中返回`defalut`设置的默认值|
|`copy()`|返回 dict 的浅复制|
|`pop(key,defalut)`|如果指定键在 dict 中存在，则将指定的键及其值从 dict 中删除，并返回对应的值；<br>如果指定键在 dict 中不存在，则返回提供的默认值，如果没有提供默认值，则返回错误`KeyError`|
|`popitem()`|按照栈的顺序弹出元素，返回一个以 key 和 value 为元素的 tuple|
|`setdefault(key, default=None)`|如果指定键在 dict 中存在，返回对应的值；如果不存在，则在字典最后插入键值对`key:default`|
|

<br>

#### 1.2.4 set

<br>

set 是仅存储 key 的容器，不存储对应的 value，key 不能重复，这与数学中的集合的概念是一样的，重复的元素在 set 中被自动过滤。Python 使用`{}`，其中没有键值对来表示 set，注意 set 实际是无序的一种容器：

<br>

``` python
test_set = {1, 3, 3, 2}
print(test_set) # {1, 2, 3}
```

<br>

也可以使用`set()`强制从其他容器转换（从下面的结果可以看出从 list 和 tuple 中转换过来时自动过滤重复的元素，而从 dict 中转换过来时只保留 key）：
的参数：

        
<br>

``` python
test_list = [1, 3, 2, 3]
test_tuple = (2, 3, 4, 3)
test_dict = {
    'name' : 'AshGrey',
    'age'  : 20,
    'id'   : 2022012050
    }
test_set_from_list = set(test_list)
test_set_from_tuple = set(test_tuple)
test_set_from_dict = set(test_dict)
print(test_set_from_list)   # {1, 2, 3}
print(test_set_from_tuple)  # {2, 3, 4}
print(test_set_from_dict)   # {'age', 'id', 'name'}
```

<br>

我们还可以测试下其他容器的强制转换函数：
- list 的强制转换函数`list()`（从下面的测试中可以看出，从 tuple 转换过来是保留元素及元素的顺序的，从 dict 转换过来是只保留 key 的，从 set 转换过来时元素是随机无序的）：

    ``` python
    test_tuple = (2, 3, 1, 2)
    test_dict = {
        'name' : 'AshGrey',
        'age'  : 20,
        'id'   : 2022012050
        }
    test_set = {1, 3, 2}
    test_list_from_tuple = list(test_tuple)
    test_list_from_dict = list(test_dict)
    test_list_from_set = list(test_set)
    print(test_list_from_tuple) # [2, 3, 1, 2]
    print(test_list_from_dict)  # ['name', 'age', 'id']
    print(test_list_from_set)   # [1, 2, 3]
    ```

- tuple 的强制转换函数`tuple()`（从下面的测试中可以看出，从 list 转换过来是保留元素及元素顺序的，从 dict 转换过来只保留 key 的，从 set 转换过来时元素是随机无序的）：

    ``` python
    test_list = [2, 3, 1, 2]
    test_dict = {
        'name' : 'AshGrey',
        'age'  : 20,
        'id'   : 2022012050
        }
    test_set = {2, 3, 1, 5, 7}
    test_tuple_from_list = tuple(test_list)
    test_tuple_from_dict = tuple(test_dict)
    test_tuple_from_set = tuple(test_set)
    print(test_tuple_from_list) # (2, 3, 1, 2)
    print(test_tuple_from_dict) # ('name', 'age', 'id')
    print(test_tuple_from_set)  # (1, 2, 3, 5, 7)
    ```

- dict 的强制转换函数`dict()`只能接受由键值对 tuple 组成的 list 的参数：

    ``` python
    test_list = []
    test_list.append(('name', 'AshGrey'))
    test_list.append(('age', 20))
    test_list.append(('id', 2022012050))
    test_dict_from_list = dict(test_list)
    print(test_dict_from_list)
    ```

<br>

set 支持数学集合中的运算：

<br>

``` python
set_1 = {1, 2, 3}
set_2 = {2, 3, 4}
print(set_1 - set_2)    # {1}
print(set_2 - set_1)    # {4}
print(set_1 | set_2)    # {1, 2, 3, 4}
print(set_1 & set_2)    # {2, 3}
print(set_1 ^ set_2)    # {1, 4}
```


<br>

### 1.3 语句

<br>

#### 1.3.1 for 循环

<br>

注意 Python 的`for`循环只有一种：`for in :`，这是一种遍历 list 的循环语句，那么如何实现精确次数的循环呢？Python 提供
- `range(x)`函数生成区间为 $\left[0..x-1\right]$ 的 list；
- `range(a,b)`函数生成区间为 $\left[a..b-1\right]$ 的 list；
- `range(a,b,l)`函数生成以下 list，`l`指定步长：

    $$
        \left\{a, a+l,a+2l,\cdots,a+\left\lfloor\frac{b-a}{l}\right\rfloor l\right\}
    $$

所以可以这样写出精确次数的循环：

<br>

``` python
sum_to_100, sum_from_100_to_1000, sum_even_from_50_to_100 = 0, 0, 0
for x in range(101) :
    sum_to_100 += x
print(sum_to_100)                   # 5050
for x in range(100, 1001) :
    sum_from_100_to_1000 += x
print(sum_from_100_to_1000)         # 495550
for x in range(50, 101, 2) :
    sum_even_from_50_to_100 += x
print(sum_even_from_50_to_100)      # 1950
```

<br>

当然对于用户自定义的 list，`for`循环也可以使用：

<br>

``` python
languages = ['Haskell', 'Lisp', 'Vue']
for (lan in languages) :
    print(lan)
```

<br>

#### 1.3.2 while 循环

<br>

只要`while`后的条件成立，就会循环执行`while`语句块中的语句：

<br>

``` python
input_num = 27
while input_num != 1 :
    if input_num % 2 == 0 :
        input_num //= 2
    else :
        input_num = 3 * input_num + 1
    print(input_num)
```

<br>

`while`循环和`for`循环都可以使用`break`跳出循环，使用`continue`跳过本次循环直接进入下一次循环，不执行之后的代码。

<br>

#### 1.3.3 if 控制流语句

<br>

Python 中也是`if-elif-else`结构，必须在每个`if`、`elif`和`else`之后加上冒号`:`。检查特定值是否在 list 或者 tuple 中时，可以使用关键字`in`，检查其不在 list 或者 tuple 中时，可以使用关键字`not in`。

<br>

``` python
languages = ['Vue', 'React', 'Flutter', 'Next']
if 'VimScript' in languages :
    print('VimScript is in list \'languages\'')
elif 'Flutter' not in languages :
    print('Flutter is not in list \'languages\'')
else :
    for lang in languages :
        print(lang)
```




<br>

#### 1.3.4 match 控制流语句

<br>

Python 提供`match`控制流语句类比类 C 语言的`switch`，都是用于匹配的控制流语句，可以使用`|`表示匹配多个值，`case`语句后还可以跟上`if`语句来表示匹配`if`语句的表达式，用`_`表示上面所有匹配都不成立时的默认匹配：

<br>

``` python
import random
import math

random_int = math.ceil((random.random() * 10)) + 1

match random_int :
    case x if x % 2 == 1 :
        print(math.exp(random_int))
    case 2 | 4 | 8 :
        print(math.log2(random_int))
    case _ :
        print(math.log10(random_int))
```

<br>

`case`还可以用于匹配列表：

<br>

``` python
args = ['gcc', 'main.c', 'head.h']

match args :
    case ['gcc'] :
        print('gcc: missing source file(s).')
    case ['gcc', file1, *files] :
        print('gcc compile: ' + file1 + ',' + ','.join(files))
    case ['clean'] :
        print('clean')
    case _ :
        print('invalid command,')
```

<br>

### 1.4 函数

<br>

Python 

<br>

<br>

<br>

## 2 Python 容器的高级特性

<br>
